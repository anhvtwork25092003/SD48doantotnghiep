<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/layoutchung/mainLayout}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Giỏ hàng</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
            type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/user/css/cart.css">
</head>
<body>
<article layout:fragment="noiDung">
    <div class="wrap cf">
        <div class="heading cf">
            <h1>Giỏ hàng của tôi</h1>
            <a href="#" class="continue">Tiếp tục mua </a>
        </div>
        <div class="cart">
            <ul class="cartWrap">
                <li class="items">
                    <input type="checkbox" id="selectAll"> Chọn tất cả
                </li>
                <!-- Lặp qua danh sách sản phẩm từ controller -->
                <li class="items odd" th:each="item : ${danhSachSanPhamTrongGioHang}">
                    <input type="checkbox" class="item-checkbox">
                    <div class="infoWrap">
                        <div class="cartSection">
                            <!-- Sử dụng biểu thức Thymeleaf để đổ dữ liệu động -->
                            <img th:src="${item.sach.linkAnh1}" alt="" class="itemImg"/>
                            <p class="itemNumber" th:text="${item.sach.idSach}"></p>
                            <h3 th:text="${item.sach.tenSach}"></h3>
                            <p class="qty-control">
                            <form th:action="@{'/gio-hang/giam-so-luong-san-pham?idGioHangChiTiet=' + ${item.idGioHangChiTiet}}"
                                  method="post">
                                <button class="decrement">-</button>
                            </form>

                            <input type="text" class="qty" th:value="${item.soLuong}" th:readonly="true"/>
                            <form th:action="@{'/gio-hang/tang-so-luong-san-pham?idGioHangChiTiet=' + ${item.idGioHangChiTiet}}"
                                  method="post">
                                <button class="decrement">+</button>
                            </form>
                            </p>
                            <p class="price" th:text="${item.sach.giaBan}"></p>
                        </div>
                        <div class="prodTotal cartSection">
                            <p class="subtotal"></p>
                        </div>
                        <div class="cartSection removeWrap">
                            <a th:href="@{'/gio-hang/xoa-san-pham-khoi-gio?idGioHangChiTiet=' + ${item.idGioHangChiTiet}}"
                               class="remove">x</a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="subtotal cf">
            <ul>
                <li class="totalRow">
                    <span class="label">Thành Tiền</span>
                    <!-- Bạn có thể tính tổng giá động trong controller và truyền vào đây -->
                    <span class="value"></span>
                </li>
            </ul>
        </div>
    </div>
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="/user/js/cart.js"></script>
</article>
</body>
</html>s
