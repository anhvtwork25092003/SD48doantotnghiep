<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/layoutchung/mainLayout}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Chủ</title>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0"/>
    <link rel="stylesheet" href="/user/css/TrangChu.css"/>
</head>
<body>
<article layout:fragment="noiDung">
    <div class="container">
        <!-- HEADER -->
        <header>
            <h1><img src="/image/banner/bannerTrangChu.jpg"></h1>
        </header>
        <!-- HEADER -->

        <!-- ảnh banner khuyến mãi -->
        <div class="columnBaner">
            <div class="column" th:each="anhKhuyenMai : ${khuyenmaidanghienthi}" >
            <a th:href="@{'/uu-dai-lon/uu-dai-chi-tiet?idKhuyenMai=' + ${anhKhuyenMai.idKhuyenMai}}">
                    <img th:src="${anhKhuyenMai.linkAnhKhuyenMai}">
            </a>
            </div>
        </div>
        <!-- end ảnh banner khuyến mãi -->

        <!-- chuyển trang -->
        <div class="nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a class="nav-link" href="/trang-chu">TRANG CHỦ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/uu-dai">ƯU ĐÃI</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/ban-chay">BÁN CHẠY</a>
                </li>
                <!-- Thêm các mục menu khác nếu cần -->
            </ul>
        </div>
        <!-- end chuyển trang -->

        <!-- ưu đãi lớn -->
        <div class="row"><h2>ƯU ĐÃI LỚN</h2></div>
        <div class="product">
            <div th:each="sach : ${motkhuyenmaidangapdung.sachs}" th:limit="5" class="product-item">
                <a th:href="@{'/trang-chu/detail?idSach=' + ${sach.idSach}}">
                    <div class="product-image">
                        <img th:src="${sach.linkAnh1}">
                    </div>
                </a>
                <h3 th:text="${sach.tenSach}"></h3>
                <div class="price">
                    <h4 th:text="${sach.giaBan - (motkhuyenmaidangapdung.soPhanTramGiamGia)} + 'đ'"></h4>
                </div>
                <div class="sale">
                    <h5 th:text="${sach.giaBan} + 'đ'"></h5>
                </div>
                <div class="discount" th:text="${motkhuyenmaidangapdung.soPhanTramGiamGia} +'%'"></div>

            </div>
            <!-- Các sản phẩm khác -->
            <div class="button"><a href="/uu-dai-lon">Xem thêm</a></div>
        </div>
        <!-- end ưu đãi lớn -->

        <br>

        <!-- sảm phẩm bán chạy -->
        <div class="row"><h2>SẢN PHẨM BÁN CHẠY</h2></div>
        <div class="product">

            <div class="product-item">
                <div class="product-image">
                    <img src="/image/anhsanpham/sanpham1.jpg" alt="Doraemon Plus 1">
                </div>
                <h3>Doraemon Plus 1</h3>
                <div class="price"><h4>20.000 đ</h4></div>
                <div class="sale"><h5>25.000 đ</h5></div>
            </div>
            <div class="product-item">
                <div class="product-image">
                    <img src="/image/anhsanpham/sanpham1.jpg" alt="Doraemon Plus 1">
                </div>
                <h3>Doraemon Plus 1</h3>
                <div class="price"><h4>20.000 đ</h4></div>
                <div class="sale"><h5>25.000 đ</h5></div>
            </div>
            <div class="product-item">
                <div class="product-image">
                    <img src="/image/anhsanpham/sanpham1.jpg" alt="Doraemon Plus 1">
                </div>
                <h3>Doraemon Plus 1</h3>
                <div class="price"><h4>20.000 đ</h4></div>
                <div class="sale"><h5>25.000 đ</h5></div>
            </div>
            <div class="product-item">
                <div class="product-image">
                    <img src="/image/anhsanpham/sanpham1.jpg" alt="Doraemon Plus 1">
                </div>
                <h3>Doraemon Plus 1</h3>
                <div class="price"><h4>20.000 đ</h4></div>
                <div class="sale"><h5>25.000 đ</h5></div>
            </div>
            <div class="product-item">
                <div class="product-image">
                    <img src="/image/anhsanpham/sanpham1.jpg" alt="Doraemon Plus 1">
                </div>
                <h3>Doraemon Plus 1</h3>
                <div class="price"><h4>20.000 đ</h4></div>
                <div class="sale"><h5>25.000 đ</h5></div>
            </div>
            <!-- Các sản phẩm khác -->
            <div class="button"><a href="/trang-chu-them">Xem thêm</a></div>
        </div>
        <!-- end sảm phẩm bán chạy -->
        <br>

        <!-- sản phẩm mới nhất -->
        <div class="row">
            <h2>SẢN PHẨM MỚI NHẤT</h2>
        </div>
        <div class="product">
            <div class="product-item" th:each="sm : ${sachmoi}"  >
                <a th:href="@{'/trang-chu/detail?idSach=' + ${sm.idSach}}">
                    <div class="product-image">
                        <img th:src="${sm.linkAnh1}" th:alt="${sm.tenSach}">
                    </div>
                </a>
                <h3 th:text="${sm.tenSach}"></h3>

<!--                <div th:if="${not #lists.isEmpty(sm.khuyenMais)}">-->
<!--                    <div th:with="firstPromotion=${sm.khuyenMais[0]}">-->
<!--                        <div class="price">-->
<!--                            <h4 th:text="${sm.giaBan - (firstPromotion.soPhanTramGiamGia)} + 'đ'"></h4>-->
<!--                        </div>-->
<!--                        <div class="sale">-->
<!--                            <h5 th:text="${sm.giaBan} + 'đ'"></h5>-->
<!--                        </div>-->
<!--                        <div class="discount" th:text="${firstPromotion.soPhanTramGiamGia} +'%'"></div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div th:if="${not #lists.isEmpty(sm.khuyenMais)}">-->
<!--                    <div th:with="firstPromotion=${sm.khuyenMais[0]}">-->
<!--                        <div th:if="${firstPromotion.trangThai == 1}">-->
<!--                            <div class="price">-->
<!--                                <h4 th:text="${sm.giaBan - (firstPromotion.soPhanTramGiamGia)} + 'đ'"></h4>-->
<!--                            </div>-->
<!--                            <div class="sale">-->
<!--                                <h5 th:text="${sm.giaBan} + 'đ'"></h5>-->
<!--                            </div>-->
<!--                            <div class="discount" th:text="${firstPromotion.soPhanTramGiamGia} +'%'"></div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div th:if="${not #lists.isEmpty(sm.khuyenMais)}">-->
<!--                    <div th:with="firstPromotion=${sm.khuyenMais[0]}">-->
<!--                        <div class="price">-->
<!--                            <h4 th:if="${firstPromotion.trangThai == 1}" th:text="${sm.giaBan - (firstPromotion.soPhanTramGiamGia)} + 'đ'"></h4>-->
<!--                            <h4 th:unless="${firstPromotion.trangThai == 1}" th:text="${sm.giaBan + 'đ'}"></h4>-->
<!--                        </div>-->
<!--                        <div class="sale">-->
<!--                            <h5 th:text="${sm.giaBan} + 'đ'"></h5>-->
<!--                        </div>-->
<!--                        <div class="discount" th:if="${firstPromotion.trangThai == 1}" th:text="${firstPromotion.soPhanTramGiamGia + '%'}"></div>-->
<!--                    </div>-->
<!--                </div>-->
                <div th:if="${not #lists.isEmpty(sm.khuyenMais)}">
                    <div th:with="firstPromotion=${sm.khuyenMais[0]}">
                        <div class="price">
                            <h4 th:if="${firstPromotion.trangThai == 1}" th:text="${sm.giaBan - (firstPromotion.soPhanTramGiamGia)} + 'đ'"></h4>
                            <h4 th:unless="${firstPromotion.trangThai == 1}" th:text="${sm.giaBan + 'đ'}"></h4>
                        </div>
                        <div class="sale" th:unless="${firstPromotion.trangThai == 1}">
                            <h5 th:text="${sm.giaBan} + 'đ'"></h5>
                        </div>
                        <div class="discount" th:if="${firstPromotion.trangThai == 1}" th:text="${firstPromotion.soPhanTramGiamGia} +'%'"></div>
                    </div>
                </div>




            </div>
            <!-- Các sản phẩm khác -->
            <div class="button"><a href="#">Xem thêm</a></div>
        </div>
        <!-- end sản phẩm mới nhất -->

        <!-- Kiểm tra nếu sách đang trong chương trình khuyến mãi có trạng thái khuyến mãi là 1 -->
<!--        <div th:if="${sach.khuyenMais.?[trangThai == 1].size() > 0}">-->
<!--            &lt;!&ndash; Lấy ra chương trình khuyến mãi đầu tiên có trạng thái là 1 (giả sử mỗi sách chỉ tham gia một chương trình khuyến mãi) &ndash;&gt;-->
<!--            <th:block th:with="khuyenMaiDetail=${sach.khuyenMais.?[trangThai == 1][0]}">-->
<!--               -->
<!--            </th:block>-->
<!--        </div>-->
        <br>
    </div>
</article>
</body>
<script src="/user/js/TrangChu.js"></script>
</html>



